(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[239],{66914:function(e,r,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/manage/actor/edit/[id]",function(){return n(66606)}])},66606:function(e,r,n){"use strict";n.r(r),n.d(r,{default:function(){return q}});var t=n(85893),o=n(87536),u=n(1478),i=n(75952),a=n(44520),c=n(33144),s=n(96765),f=n(66665),l=n(65830),d=n.n(l),h=n(13505),m=n(44087),p=n(43829),v=n(34051),g=n.n(v),j=n(11163),b=n(88767),x=n(16938),y=n(258),w=n(51981),_=n(82623),E=n(60961);function O(e,r,n,t,o,u,i){try{var a=e[u](i),c=a.value}catch(s){return void n(s)}a.done?r(c):Promise.resolve(c).then(t,o)}var S=function(e){var r=(0,j.useRouter)(),n=r.query,t=r.push,o=String(n.id),u=(0,b.useQuery)(["actor",o],(function(){return y.V.getById(o)}),{onSuccess:function(r){var n=r.data;(0,w.R)(n).forEach((function(r){e(r,n[r])}))},onError:function(e){(0,_._)(e,"Get actor")},enabled:!!n.id}).isLoading,i=(0,b.useMutation)("update actor",(function(e){return y.V.update(o,e)}),{onError:function(e){(0,_._)(e,"Update actor")},onSuccess:function(){x.Rt.success("Update actor","update was successful"),t((0,E.A7)("actors"))}}).mutateAsync,a=function(){var e,r=(e=g().mark((function e(r){return g().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(r);case 2:case"end":return e.stop()}}),e)})),function(){var r=this,n=arguments;return new Promise((function(t,o){var u=e.apply(r,n);function i(e){O(u,t,o,i,a,"next",e)}function a(e){O(u,t,o,i,a,"throw",e)}i(void 0)}))});return function(e){return r.apply(this,arguments)}}();return{onSubmit:a,isLoading:u}};function P(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}function N(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{},t=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),t.forEach((function(r){P(e,r,n[r])}))}return e}var Z=function(){var e=(0,o.cI)({mode:"onChange"}),r=e.handleSubmit,n=e.register,l=e.formState.errors,v=e.control,g=e.setValue,j=e.getValues,b=S(g),x=b.isLoading,y=b.onSubmit;return(0,t.jsxs)(m.Z,{title:"Edit actor",children:[(0,t.jsx)(i.Z,{}),(0,t.jsx)(h.Z,{title:"Edit actor"}),(0,t.jsx)("form",{onSubmit:r(y),className:d().form,children:x?(0,t.jsx)(u.Z,{count:3}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:d().fields,children:[(0,t.jsx)(c.Z,N({},n("name",{required:"Name is required!"}),{placeholder:"Name",error:l.name})),(0,t.jsx)("div",{style:{width:"48%"},children:(0,t.jsx)(s.Z,{register:n,error:l.slug,generate:function(){g("slug",(0,p.G)(j("name")))}})}),(0,t.jsx)(o.Qr,{name:"photo",control:v,defaultValue:"",render:function(e){var r=e.field,n=r.value,o=r.onChange,u=e.fieldState.error;return(0,t.jsx)(f.Z,{onChange:o,value:n,error:u,folder:"actors",placeholder:"Photo"})},rules:{required:"Photo is required"}})]}),(0,t.jsx)(a.Z,{children:"Update"})]})})]})},k=function(){return(0,t.jsx)(Z,{})};k.isOnlyAdmin=!0;var q=k}},function(e){e.O(0,[536,111,774,888,179],(function(){return r=66914,e(e.s=r);var r}));var r=e.O();_N_E=r}]);